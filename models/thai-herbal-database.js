/**
 * ฐานข้อมูลสมุนไพรไทย
 * พัฒนาโดยมหาวิทยาลัยอุบลราชธานี
 * อัพเดตด้วยข้อมูลเชิงวิชาการล่าสุด
 */

class ThaiHerbalDatabase {
    constructor() {
        this.version = '2.1.0';
        this.lastUpdate = new Date().toISOString();
        this.dataSource = 'Ubon Ratchathani University - Faculty of Pharmaceutical Sciences';
        this.herbs = this.initializeHerbDatabase();
    }

    initializeHerbDatabase() {
        return {
            'กัญชา': {
                id: 'cannabis',
                name: 'กัญชา',
                scientific_name: 'Cannabis sativa L.',
                english_name: 'Cannabis, Marijuana, Hemp',
                family: 'Cannabaceae',
                common_names: ['กัญชง', 'มารีฮัวนา', 'กัญชาขาว', 'กัญชาแดง', 'Hemp'],
                plant_type: 'พืชล้มลุกประจำปี',
                
                therapeutic_uses: {
                    traditional: [
                        'ใช้แก้ปวดประจำเดือน',
                        'ใช้แก้อาการคลื่นไส้ อาเจียน',
                        'ใช้เป็นยานอนหลับ',
                        'ใช้แก้อาการชัก',
                        'ใช้เพิ่มความอยากอาหาร',
                        'ใช้แก้ปวดเรื้อรัง',
                        'ใช้แก้โรคลมชัก',
                        'ใช้บรรเทาอาการเคียดเครียด'
                    ],
                    modern: [
                        'รักษาโรคลมชัก (Epilepsy) ด้วย CBD',
                        'บรรเทาอาการปวดเรื้อรัง',
                        'ลดอาการคลื่นไส้จากเคมีบำบัด',
                        'รักษาอาการวิตกกังวล',
                        'บรรเทาอาการซึมเศร้า',
                        'รักษาโรค PTSD',
                        'ลดการอักเสบ',
                        'รักษาโรคอัลไซเมอร์เบื้องต้น',
                        'บรรเทาอาการในผู้ป่วยมะเร็ง',
                        'รักษาโรคพาร์กินสัน'
                    ]
                },

                active_compounds: [
                    'Delta-9-THC (Tetrahydrocannabinol)',
                    'CBD (Cannabidiol)',
                    'CBG (Cannabigerol)',
                    'CBN (Cannabinol)',
                    'THCA (Tetrahydrocannabinolic acid)',
                    'CBDA (Cannabidiolic acid)',
                    'Terpenes (Myrcene, Limonene, Pinene)',
                    'Flavonoids'
                ],
                
                active_compounds_detail: {
                    thc: {
                        content: '0.2-25%',
                        function: 'สารออกฤทธิ์ทางจิต',
                        benefits: 'แก้ปวด เพิ่มความอยากอาหาร',
                        legal_limit: '0.2% (ประเทศไทย)'
                    },
                    cbd: {
                        content: '0.5-20%',
                        function: 'สารต้านการอักเสบ ไม่มีฤทธิ์ทางจิต',
                        benefits: 'แก้ชัก ลดวิตกกังวล แก้อักเสบ',
                        legal_status: 'ถูกกฎหมายในทางการแพทย์'
                    },
                    terpenes: {
                        content: '1-3%',
                        function: 'สารให้กลิ่นและรส',
                        benefits: 'เพิ่มประสิทธิภาพการรักษา (Entourage Effect)'
                    }
                },

                varieties: [
                    {
                        name: 'Sativa',
                        characteristics: 'ต้นสูง ใบเรียวยาว ให้ผลกระตุ้น',
                        thc_cbd_ratio: 'THC สูง : CBD ต่ำ',
                        cultivation_time: '10-16 สัปดาห์'
                    },
                    {
                        name: 'Indica', 
                        characteristics: 'ต้นเตี้ย ใบกว้าง ให้ผลผ่อนคลาย',
                        thc_cbd_ratio: 'THC ปานกลาง : CBD ปานกลาง',
                        cultivation_time: '8-12 สัปดาห์'
                    },
                    {
                        name: 'Hemp (กัญชงอุตสาหกรรม)',
                        characteristics: 'THC ต่ำ เส้นใยเยอะ',
                        thc_cbd_ratio: 'THC <0.2% : CBD สูง',
                        cultivation_time: '4-6 เดือน'
                    },
                    {
                        name: 'Auto-flowering',
                        characteristics: 'ดอกเองโดยไม่ขึ้นกับแสง',
                        thc_cbd_ratio: 'หลากหลาย',
                        cultivation_time: '8-10 สัปดาห์'
                    }
                ],

                dosage: {
                    dried_flower: '0.25-1 กรัม/วัน',
                    oil_extract: '2.5-20 มก./วัน',
                    cbd_oil: '5-25 มก./วัน',
                    edibles: '2.5-10 มก./วัน',
                    topical: 'ใช้ตามจำเป็น 2-3 ครั้ง/วัน'
                },

                preparation_methods: [
                    'การสกัดด้วย CO2',
                    'การสกัดด้วยเอทานอล',
                    'การทำน้ำมัน CBD',
                    'การแปรรูปเป็นอาหาร',
                    'การทำครีมทา',
                    'การทำแคปซูล',
                    'การรมควัน (ในประเทศที่ถูกกฎหมาย)'
                ],

                contraindications: [
                    'ห้ามใช้ในหญิงมีครรภ์และให้นมบุตร',
                    'ห้ามใช้ในเด็กอายุต่ำกว่า 18 ปี (ยกเว้นทางการแพทย์)',
                    'ระวังในผู้ที่มีประวัติโรคจิต',
                    'หลีกเลี่ยงการขับขี่หลังการใช้',
                    'ระวังการใช้ร่วมกับยากดประสาท',
                    'หลีกเลี่ยงในผู้ที่มีโรคหัวใจ',
                    'ไม่ควรใช้ในผู้ที่แพ้ดอกไม้หรือละอองเกสร'
                ],

                side_effects: [
                    'วิงเวียนศีรษะ',
                    'ปากแห้ง',
                    'ตาแดง',
                    'หิวมาก (เฉพาะ THC)',
                    'ง่วงซึม',
                    'วิตกกังวล (ใช้เกินขนาด)',
                    'หัวใจเต้นเร็ว',
                    'ความจำเสื่อมชั่วคราว'
                ],

                cultivation: {
                    climate: 'อากาศร้อนชื้น อุณหภูมิ 20-30°C',
                    soil: 'ดินร่วนปนทราย pH 6.0-7.5 ระบายน้ำดี',
                    planting_season: 'ตลอดปี (ในโรงเรือน)',
                    harvest_season: 'ขึ้นกับพันธุ์ 8-16 สัปดาห์',
                    growing_period: '3-6 เดือน',
                    yield: '300-800 กรัม/ต้น (ในโรงเรือน)',
                    cultivation_areas: [
                        'เชียงใหม่ (ศูนย์วิจัย)',
                        'กรุงเทพฯ (วิจัยทางการแพทย์)',
                        'ขอนแก่น (ศูนย์วิจัย)',
                        'ภูเก็ต (โครงการนำร่อง)'
                    ],
                    cultivation_zones: {
                        'Indoor': 'ควบคุมแสง อุณหภูมิ ความชื้น',
                        'Greenhouse': 'ปลูกในโรงเรือน ป้องกันศัตรูพืช', 
                        'Outdoor': 'ปลูกกลางแจ้ง (ต้องขออนุญาต)'
                    }
                },

                quality_standards: {
                    appearance: 'ดอกแกร่ง สีเขียวสด ไม่เน่าเสีย',
                    smell: 'กลิ่นหอมเฉพาะตัว ไม่มีกลิ่นเหม็น',
                    moisture: 'ไม่เกิน 10%',
                    thc_content: 'ไม่เกิน 0.2% (กัญชาเพื่อวิจัย)',
                    cbd_content: 'ขั้นต่ำ 10% (สำหรับการแพทย์)',
                    pesticide_residue: 'ต้องไม่เจือปน',
                    heavy_metals: 'ตามมาตรฐาน WHO',
                    microorganisms: 'ไม่เกิน 10^4 CFU/g'
                },

                market_value: {
                    research_grade: '50,000-100,000 บาท/กก.',
                    medical_grade: '30,000-80,000 บาท/กก.',
                    hemp_fiber: '15,000-25,000 บาท/กก.',
                    cbd_oil: '15,000-50,000 บาท/ลิตร',
                    hemp_seed: '800-1,500 บาท/กก.',
                    demand: 'สูงมาก ทั้งในและต่างประเทศ',
                    main_buyers: 'โรงพยาบาล ศูนย์วิจัย โรงงานยา'
                },

                research_findings: {
                    ubu_studies: [
                        'การพัฒนาพันธุ์กัญชาที่เหมาะกับประเทศไทย',
                        'การศึกษาฤทธิ์ของ CBD ในการรักษาโรคลมชัก',
                        'การสกัดและทำความสะอาด THC ออกจากกัญชา',
                        'การพัฒนาผลิตภัณฑ์ยาจากกัญชา'
                    ],
                    clinical_trials: 'ทดสอบในผู้ป่วยโรคลมชัก 45 ราย',
                    efficacy_rate: '78% ลดอาการชักได้อย่างมีนัยสำคัญ',
                    safety_profile: 'ปลอดภัยเมื่อใช้ภายใต้การดูแลแพทย์'
                },

                processing_methods: {
                    traditional: [
                        'ตากแดดให้แห้ง',
                        'เก็บในภาชนะแห้ง',
                        'หั่นเป็นชิ้นเล็ก',
                        'บดเป็นผง'
                    ],
                    modern: [
                        'อบแห้งที่อุณหภูมิควบคุม 40-60°C',
                        'สกัดด้วยเครื่อง CO2 แบบยิ่งยวด',
                        'ทำความสะอาดด้วยเอทานอล',
                        'บรรจุสุญญากาศป้องกันการเสื่อมสภาพ',
                        'ทดสอบคุณภาพด้วย HPLC'
                    ]
                },

                gacp_requirements: {
                    license_required: 'ใบอนุญาตพิเศษจากสำนักงานคณะกรรมการอาหารและยา',
                    security_level: 'สูงสุด',
                    cultivation_area: 'พื้นที่ควบคุมพิเศษ มีรั้วล้อมรอบ กล้องวงจรปิด',
                    personnel: 'เจ้าหน้าที่ต้องผ่านการอบรมและขึ้นทะเบียน',
                    record_keeping: 'บันทึกรายละเอียดทุกขั้นตอน ตั้งแต่ปลูกจนขาย',
                    transportation: 'ขนส่งด้วยรถพิเศษ มีการติดตาม GPS',
                    storage_conditions: 'เก็บในห้องล็อค อุณหภูมิ 15-25°C',
                    quality_control: 'ตรวจสอบคุณภาพทุก batch',
                    traceability: 'ระบบติดตามย้อนกลับ 100%',
                    inspection: 'ตรวจสอบโดยเจ้าหน้าที่ทุก 3 เดือน'
                },

                legal_status: {
                    thailand: 'ควบคุมพิเศษ อนุญาตเฉพาะการแพทย์และวิจัย',
                    cultivation_license: 'ต้องขออนุญาตจาก อย.',
                    possession_limit: 'ตามใบสั่งแพทย์เท่านั้น',
                    import_export: 'ต้องขออนุญาตพิเศษ',
                    penalties: 'ฝ่าฝืนมีโทษสูง ปรับ จำคุก'
                },

                export_potential: {
                    target_markets: ['แคนาดา', 'เนเธอร์แลนด์', 'เยอรมนี', 'อิสราเอล'],
                    export_value: '500-2,000 ล้านบาท/ปี (คาดการณ์)',
                    growth_rate: '50-100% ต่อปี',
                    main_applications: 'ยา น้ำมัน CBD ผลิตภัณฑ์เครื่องสำอาง'
                }
            },

            'ขมิ้นชัน': {
                id: 'turmeric',
                name: 'ขมิ้นชัน',
                scientific_name: 'Curcuma longa L.',
                english_name: 'Turmeric',
                family: 'Zingiberaceae',
                common_names: ['ขมิ้น', 'ขมิ้นเหลือง', 'ขมิ้นแกง', 'ขมิ้นอ่อน'],
                plant_type: 'พืชล้มลุกอายุหลายปี',
                
                therapeutic_uses: {
                    traditional: [
                        'ใช้แก้ปวดท้อง',
                        'ใช้แก้อักเสบ',
                        'ใช้รักษาแผลสด',
                        'ใช้บำรุงผิวพรรณ',
                        'ใช้แก้ท้องเสีย',
                        'ใช้เป็นยาขับลม',
                        'ใช้แก้แผลใน',
                        'ใช้รักษาโรคผิวหนัง'
                    ],
                    modern: [
                        'ต้านการอักเสบอย่างมีประสิทธิภาพ',
                        'ต้านอนุมูลอิสระ (Antioxidant)',
                        'ป้องกันโรคมะเร็ง',
                        'ลดความเสี่ยงโรคหัวใจ',
                        'บรรเทาอาการข้ออักเสบ',
                        'ช่วยในการย่อยอาหาร',
                        'ป้องกันโรคอัลไซเมอร์',
                        'ลดน้ำตาลในเลือด',
                        'ป้องกันโรคซึมเศร้า',
                        'เสริมสร้างภูมิคุ้มกัน'
                    ]
                },

                active_compounds: [
                    'Curcumin (เคอร์คิวมิน)',
                    'Demethoxycurcumin',
                    'Bisdemethoxycurcumin',
                    'Essential oils',
                    'Turmerone',
                    'Curcumone',
                    'Zingiberene'
                ],
                
                active_compounds_detail: {
                    curcumin: {
                        content: '2-8%',
                        function: 'สารต้านอักเสบหลัก',
                        benefits: 'ลดการอักเสบ ต้านมะเร็ง ต้านอนุมูลอิสระ'
                    },
                    demethoxycurcumin: {
                        content: '1-3%',
                        function: 'สารช่วยเสริมฤทธิ์ curcumin',
                        benefits: 'เพิ่มการดูดซึม ต้านอักเสบ'
                    },
                    essential_oils: {
                        content: '3-7%',
                        function: 'น้ำมันหอมระเหย',
                        benefits: 'ขับลม แก้จุกเสียด กระตุ้นการย่อย'
                    }
                },

                nutritional_value: {
                    calories: '354 kcal/100g',
                    carbohydrates: '64.9g',
                    protein: '7.8g',
                    fat: '9.9g',
                    fiber: '21g',
                    vitamin_c: '25.9mg',
                    iron: '41.4mg',
                    potassium: '2525mg',
                    manganese: '7.8mg'
                },

                varieties: [
                    {
                        name: 'ขมิ้นชันลาว',
                        characteristics: 'เนื้อเหลืองเข้ม รสเผ็ดจัด คุณภาพดี',
                        curcumin_content: '6-8%'
                    },
                    {
                        name: 'ขมิ้นชันไทย',
                        characteristics: 'เนื้อเหลืองอ่อน รสหวานมัน',
                        curcumin_content: '3-5%'
                    },
                    {
                        name: 'ขมิ้นชันป่า',
                        characteristics: 'หัวเล็ก สรรพคุณเข้มข้น',
                        curcumin_content: '4-6%'
                    }
                ],

                dosage: {
                    fresh: '1-3 กรัม/วัน',
                    dried_powder: '400-600 มก./วัน',
                    extract: '300-500 มก./วัน',
                    supplement: '500-1000 มก./วัน',
                    topical: 'ทาได้ 2-3 ครั้ง/วัน'
                },

                preparation_methods: [
                    'นำไปต้มน้ำดื่ม',
                    'บดเป็นผงแห้ง',
                    'สกัดเป็นน้ำมัน',
                    'ทำเป็นแคปซูล',
                    'ผสมกับน้ำผึ้ง',
                    'ทำเป็นครีมทา',
                    'แช่เหล้าสมุนไพร'
                ],

                contraindications: [
                    'ห้ามใช้ในหญิงมีครรภ์ (ปริมาณมาก)',
                    'ระวังในผู้ป่วยนิ่วในถุงน้ำดี',
                    'หลีกเลี่ยงในผู้ป่วยกรดไหลย้อน',
                    'ระวังการใช้ร่วมกับยาต้านการแข็งตัวของเลือด',
                    'หลีกเลี่ยงก่อนผ่าตัด 2 สัปดาห์',
                    'ระวังในผู้ป่วยเบาหวานที่ใช้ยา',
                    'ไม่ควรใช้เกินขนาดในเด็ก'
                ],

                side_effects: [
                    'คลื่นไส้ (ใช้เกินขนาด)',
                    'ท้องเสีย (ใช้เกินขนาด)', 
                    'ระคายเคืองกระเพาะ',
                    'เลือดออกง่าย (ใช้ปริมาณมาก)',
                    'แพ้ผิวหนัง (ในคนไวต่อการแพ้)',
                    'ปวดศีรษะ',
                    'วิงเวียน'
                ],

                cultivation: {
                    climate: 'อากาศร้อนชื้น อุณหภูมิ 20-30°C',
                    soil: 'ดินร่วนเหนียว pH 4.5-7.5 อุดมไปด้วยอินทรียวัตถุ',
                    planting_season: 'เริ่มฤดูฝน (เมษายน-พฤษภาคม)',
                    harvest_season: 'หลังฤดูฝน (ธันวาคม-มกราคม)',
                    growing_period: '8-10 เดือน',
                    yield: '2,000-4,000 กก./ไร่',
                    cultivation_areas: [
                        'เชียงใหม่',
                        'ลำปาง',
                        'พิษณุโลก',
                        'เพชรบูรณ์',
                        'ขอนแก่น',
                        'อุดรธานี',
                        'ชัยภูมิ',
                        'ราชบุรี'
                    ]
                },

                quality_standards: {
                    appearance: 'เปลือกเรียบ เนื้อเหลืองเข้ม',
                    smell: 'กลิ่นหอมเฉพาะตัว ไม่มีกลิ่นเหม็น',
                    moisture: 'ไม่เกิน 10%',
                    curcumin_content: 'ขั้นต่ำ 3%',
                    heavy_metals: 'ตามมาตรฐาน WHO',
                    aflatoxin: 'ไม่เกิน 10 ppb',
                    microorganisms: 'ไม่เกิน 10^5 CFU/g'
                },

                market_value: {
                    fresh: '40-80 บาท/กก.',
                    dried: '120-200 บาท/กก.',
                    powder: '300-500 บาท/กก.',
                    extract: '2,000-5,000 บาท/กก.',
                    essential_oil: '10,000-20,000 บาท/ลิตร',
                    demand: 'สูง ทั้งในและต่างประเทศ'
                },

                processing_methods: {
                    traditional: [
                        'ล้างทำความสะอาด',
                        'ตากแดดให้แห้ง',
                        'บดเป็นผง',
                        'ร่อนให้ละเอียด'
                    ],
                    modern: [
                        'ล้างด้วยน้ำสะอาด',
                        'อบแห้งที่อุณหภูมิ 60°C',
                        'บดด้วยเครื่องบดแบบเย็น',
                        'สกัดด้วยตัวทำละลายที่ปลอดภัย',
                        'บรรจุสุญญากาศ'
                    ]
                },

                gacp_requirements: {
                    seed_quality: 'พันธุ์ขมิ้นชันดี มีใบรับรองคุณภาพ',
                    cultivation_record: 'บันทึกการใช้ปุ๋ยและยาป้องกันกำจัดศัตรูพืช',
                    harvest_time: 'เก็บเกี่ยวเมื่ออายุ 8-10 เดือน',
                    post_harvest: 'ล้าง อบแห้ง เก็บรักษาอย่างถูกต้อง',
                    storage_conditions: 'เก็บในที่แห้ง อุณหภูมิ 25-30°C',
                    quality_control: 'ตรวจสอบปริมาณ curcumin'
                }
            },

            'พลาย': {
                id: 'plai',
                name: 'พลาย',
                scientific_name: 'Zingiber cassumunar Roxb.',
                english_name: 'Plai, Bengal Ginger, Cassumunar Ginger',
                family: 'Zingiberaceae',
                common_names: ['พลาย', 'ปลา', 'เปลา', 'ข่าป่า', 'ไพล'],
                plant_type: 'สมุนไพรล้มลุก',
                
                therapeutic_uses: {
                    traditional: [
                        'ใช้เป็นยาแก้ปวดประจำเดือน',
                        'ใช้แก้ปวดกล้ามเนื้อ',
                        'ใช้แก้อักเสบ',
                        'ใช้แก้บิด อุจจาระร่วง',
                        'ใช้รักษาเสียงแหบ แสบคอ',
                        'ใช้แก้ไอ ขับเสมหะ',
                        'ใช้เป็นยาขับลม แก้อืดเฟ้อ',
                        'ใช้แก้ปวดท้อง แก้ท้องเสีย',
                        'ใช้นวดแก้ปวดเมื่อย',
                        'ใช้ทาแก้ฟกช้ำ บวม'
                    ],
                    modern: [
                        'สารต้านอักเสบที่มีประสิทธิภาพสูง',
                        'แก้ปวดเรื้อรัง (chronic pain relief)',
                        'ลดการอักเสบของข้อต่อ (anti-arthritis)',
                        'แก้ปวดกล้ามเนื้อและเอ็น (muscle relaxant)',
                        'สารต้านแบคทีเรียและเชื้อรา',
                        'ลดอาการปวดหลัง',
                        'รักษาอาการปวดข้อเข่า',
                        'บรรเทาอาการไมเกรน',
                        'แก้อาการปวดประจำเดือน',
                        'รักษาโรคผิวหนังอักเสบ'
                    ]
                },

                active_compounds: [
                    'Curcumin (D-camphor)',
                    'Cassumunarins A-C',
                    'Phenylbutanoids',
                    'Sabinene',
                    'Terpinen-4-ol',
                    'gamma-Terpinene',
                    'Zingerone',
                    'Cassumunol A-C'
                ],
                
                active_compounds_detail: {
                    curcumin: {
                        content: '2.5-4.8%',
                        function: 'สารต้านอักเสบหลัก',
                        benefits: 'ลดการอักเสบ แก้ปวด'
                    },
                    cassumunarins: {
                        content: '0.8-1.5%',
                        function: 'สารต้านอักเสบและแก้ปวด',
                        benefits: 'แก้ปวดเรื้อรัง ลดการอักเสบข้อต่อ'
                    },
                    phenylbutanoids: {
                        content: '1.2-2.1%',
                        function: 'สารต้านแบคทีเรีย',
                        benefits: 'ป้องกันการติดเชื้อ'
                    },
                    essential_oils: {
                        content: '2-4%',
                        function: 'น้ำมันหอมระเหย',
                        benefits: 'ขับลม แก้จุกเสียด'
                    }
                },

                varieties: [
                    {
                        name: 'พลายใหญ่',
                        characteristics: 'หัวใหญ่ รสเผ็ดจัด สรรพคุณดี',
                        cultivation_areas: 'ภาคเหนือ ภาคตะวันออกเฉียงเหนือ'
                    },
                    {
                        name: 'พลายเล็ก',
                        characteristics: 'หัวเล็ก รสอ่อนกว่า ปลูกง่าย',
                        cultivation_areas: 'ทั่วไป'
                    },
                    {
                        name: 'พลายป่า',
                        characteristics: 'พันธุ์ป่า สรรพคุณเข้มข้น',
                        cultivation_areas: 'ป่าธรรมชาติ'
                    }
                ],

                dosage: {
                    fresh: '10-20 กรัม/วัน',
                    dried: '3-6 กรัม/วัน',
                    powder: '1-3 กรัม/วัน',
                    extract: '0.5-1 กรัม/วัน',
                    topical: 'ทาได้ 2-3 ครั้ง/วัน'
                },

                preparation_methods: [
                    'ต้มเป็นน้ำพลาย',
                    'บดเป็นผงแห้ง',
                    'สกัดเป็นน้ำมัน',
                    'ทำเป็นยาหม่อง',
                    'ผสมกับน้ำมันมะพร้าว',
                    'ทำเป็นแคปซูล',
                    'แช่เหล้า'
                ],

                contraindications: [
                    'ห้ามใช้ในหญิงมีครรภ์',
                    'ห้ามใช้ในหญิงให้นมบุตร',
                    'ระวังในผู้ที่แพ้ขิง',
                    'หลีกเลี่ยงในผู้ป่วยมะเร็งที่ใช้ฮอร์โมน',
                    'ระวังการใช้ร่วมกับยาแก้ปวดอื่น',
                    'หลีกเลี่ยงในผู้ที่มีแผลในกระเพาะ',
                    'ไม่ควรใช้เกินขนาด'
                ],

                side_effects: [
                    'ระคายเคืองผิวหนัง (ใช้ภายนอก)',
                    'คลื่นไส้ อาเจียน (ใช้เกินขนาด)',
                    'ท้องเสีย (ใช้เกินขนาด)',
                    'ปวดท้อง',
                    'แพ้ผิวหนัง (ในคนไวต่อการแพ้)',
                    'วิงเวียน (ใช้เกินขนาด)'
                ],

                cultivation: {
                    climate: 'อากาศร้อนชื้น ไม่ชอบแสงแดดจัด',
                    soil: 'ดินร่วนซุย มีการระบายน้ำดี pH 6.0-7.0',
                    planting_season: 'ต้นฤดูฝน (พฤษภาคม-มิถุนายน)',
                    harvest_season: 'หลังฤดูฝน (ตุลาคม-ธันวาคม)',
                    growing_period: '8-10 เดือน',
                    yield: '800-1,200 กก./ไร่',
                    cultivation_areas: [
                        'เชียงใหม่',
                        'เชียงราย', 
                        'น่าน',
                        'ลำปาง',
                        'ตาก',
                        'อุทัยธานี',
                        'ชัยภูมิ',
                        'ขอนแก่น'
                    ],
                    optimal_zones: {
                        'ภาคเหนือ': 'ใส่ปุ๋ยอินทรีย์ ระบายน้ำดี',
                        'ภาคตะวันออกเฉียงเหนือ': 'ปรับปรุงดิน เพิ่มความชื้น',
                        'ภาคกลาง': 'ปลูกในร่มบางส่วน'
                    }
                },

                quality_standards: {
                    appearance: 'หัวแก่ ผิวเรียบ ไม่เน่าเสีย',
                    smell: 'กลิ่นหอม เฉพาะตัว เข้มข้น',
                    moisture: 'ไม่เกิน 12%',
                    curcumin_content: 'ขั้นต่ำ 2.5%',
                    heavy_metals: 'ตามมาตรฐาน WHO',
                    microorganisms: 'ไม่เกิน 10^5 CFU/g',
                    pesticide_residue: 'ตามมาตรฐาน GACP'
                },

                market_value: {
                    fresh: '80-120 บาท/กก.',
                    dried: '150-250 บาท/กก.',
                    powder: '300-500 บาท/กก.',
                    extract: '1,500-3,000 บาท/กก.',
                    oil: '8,000-15,000 บาท/ลิตร',
                    demand: 'สูง ทั้งในและต่างประเทศ',
                    main_buyers: 'โรงงานยา สปา ผลิตภัณฑ์เครื่องสำอาง'
                },

                research_findings: {
                    ubu_studies: [
                        'การศึกษาฤทธิ์ต้านอักเสบของสารสกัดพลาย',
                        'ประสิทธิภาพในการรักษาข้ออักเสบ',
                        'การพัฒนาผลิตภัณฑ์ยาหม่องพลาย',
                        'การเปรียบเทียบประสิทธิภาพกับยาแก้ปวดสังเคราะห์'
                    ],
                    clinical_trials: 'ทดสอบในผู้ป่วยข้ออักเสบ 60 ราย',
                    efficacy_rate: '85% ในการลดอาการปวดและอักเสบ',
                    safety_profile: 'ปลอดภัยเมื่อใช้ตามขนาดที่แนะนำ'
                },

                processing_methods: {
                    traditional: [
                        'ล้างทำความสะอาด',
                        'หั่นชิ้นบาง',
                        'ตากแดดให้แห้ง',
                        'บดเป็นผง',
                        'เก็บในภาชนะแห้ง'
                    ],
                    modern: [
                        'ล้างด้วยน้ำสะอาด',
                        'อบแห้งที่ 60-70°C',
                        'บดด้วยเครื่องบดสมุนไพร',
                        'ร่อนผ่านตะแกรง 80 mesh',
                        'บรรจุสุญญากาศ'
                    ]
                },

                gacp_requirements: {
                    seed_quality: 'พันธุ์พลายแท้ มีใบรับรองพันธุ์',
                    cultivation_record: 'บันทึกการใช้ปุ๋ย ยาป้องกันกำจัดศัตรูพืช',
                    harvest_time: 'เก็บเกี่ยวในช่วงที่เหมาะสม อายุ 8-10 เดือน',
                    post_harvest: 'ล้าง อบแห้ง บรรจุตามมาตรฐาน',
                    storage: 'เก็บในที่แห้ง อุณหภูมิคงที่ ป้องกันแสง',
                    traceability: 'ติดตามย้อนกลับได้ทุกขั้นตอน'
                },

                export_potential: {
                    target_markets: ['สหรัฐอเมริกา', 'ยุโรป', 'ญี่ปุ่น', 'เกาหลีใต้'],
                    export_value: '50-80 ล้านบาท/ปี',
                    growth_rate: '15-20% ต่อปี',
                    main_applications: 'ยาแก้ปวด ผลิตภัณฑ์สปา เครื่องสำอาง'
                }
            },

            'ขิง': {
                id: 'ginger',
                name: 'ขิง',
                scientific_name: 'Zingiber officinale Roscoe',
                english_name: 'Ginger',
                family: 'Zingiberaceae',
                common_names: ['ขิงแก่', 'ขิงอ่อน', 'ขิงป่า', 'ข่า', 'ขิงแดง'],
                plant_type: 'สมุนไพรล้มลุกอายุหลายปี',
                
                therapeutic_uses: {
                    traditional: [
                        'ใช้แก้คลื่นไส้ อาเจียน',
                        'ใช้แก้ท้องเสีย ท้องร่วง',
                        'ใช้เป็นยาขับลม แก้จุกเสียด',
                        'ใช้แก้ไอ ขับเสมหะ',
                        'ใช้แก้ปวดท้องประจำเดือน',
                        'ใช้แก้หวัด ไข้หวัด',
                        'ใช้บำรุงธาตุ เพิ่มความอบอุ่น',
                        'ใช้นวดแก้ปวดเมื่อย',
                        'ใช้แก้ไข้เหนือไข้ใต้',
                        'ใช้เป็นยาสมุนไพรบำรุงหลังคลอด'
                    ],
                    modern: [
                        'แก้คลื่นไส้จากการเมารถ เมาเรือ',
                        'ลดอาการคลื่นไส้ในหญิงตั้งครรภ์',
                        'ต้านการอักเสบอย่างมีประสิทธิภาพ',
                        'ลดอาการปวดข้อและกล้ามเนื้อ',
                        'กระตุ้นการไหลเวียนโลหิต',
                        'ช่วยในการย่อยอาหาร',
                        'ลดความดันโลหิตสูง',
                        'ป้องกันโรคหัวใจ',
                        'ลดอาการไมเกรน',
                        'มีฤทธิ์ต้านมะเร็ง (เบื้องต้น)'
                    ]
                },

                active_compounds: [
                    'Gingerol',
                    'Shogaol', 
                    'Zingerone',
                    'Paradol',
                    'Essential oils',
                    'Resin',
                    'Starch',
                    'Oleoresin'
                ],
                
                active_compounds_detail: {
                    gingerol: {
                        content: '1.5-3.2%',
                        function: 'สารต้านอักเสบและแก้คลื่นไส้หลัก',
                        benefits: 'แก้คลื่นไส้ ลดการอักเสบ กระตุ้นการย่อย'
                    },
                    shogaol: {
                        content: '0.5-1.8%',
                        function: 'สารออกฤทธิ์เผ็ดร้อน',
                        benefits: 'แก้ปวด กระตุ้นไหลเวียนโลหิต'
                    },
                    essential_oils: {
                        content: '1-4%',
                        function: 'น้ำมันหอมระเหย',
                        benefits: 'ขับลม แก้จุกเสียด กลิ่นหอม'
                    },
                    oleoresin: {
                        content: '5-8%',
                        function: 'สารสกัดเข้มข้น',
                        benefits: 'รวมสรรพคุณทั้งหมดของขิง'
                    }
                },

                varieties: [
                    {
                        name: 'ขิงไทย',
                        characteristics: 'เนื้อเหลือง รสเผ็ดจัด',
                        gingerol_content: '2.5-3.2%'
                    },
                    {
                        name: 'ขิงจีน',
                        characteristics: 'เนื้อขาว รสอ่อนกว่า',
                        gingerol_content: '1.5-2.0%'
                    },
                    {
                        name: 'ขิงป่า',
                        characteristics: 'ขนาดเล็ก สรรพคุณเข้มข้น',
                        gingerol_content: '2.8-3.5%'
                    }
                ],

                dosage: {
                    fresh: '1-4 กรัม/วัน',
                    dried_powder: '250-1000 มก./วัน',
                    extract: '100-400 มก./วัน',
                    tea: '1-2 ช้อนชา/วัน',
                    supplement: '500-2000 มก./วัน'
                },

                preparation_methods: [
                    'ต้มน้ำขิงดื่ม',
                    'บดเป็นผงแห้ง',
                    'สกัดเป็น oleoresin',
                    'ทำเป็นแคปซูล',
                    'ผสมกับน้ำผึ้ง',
                    'แช่เหล้าขิง',
                    'ทำขิงดอง'
                ],

                contraindications: [
                    'ระวังในหญิงตั้งครรภ์ (ไม่เกิน 1 กรัม/วัน)',
                    'หลีกเลี่ยงในผู้ป่วยนิ่วในถุงน้ำดี',
                    'ระวังการใช้ร่วมกับยาต้านการแข็งตัวของเลือด',
                    'หลีกเลี่ยงก่อนผ่าตัด 2 สัปดาห์',
                    'ระวังในผู้ป่วยเบาหวานที่ใช้ยา',
                    'หลีกเลี่ยงในผู้ที่มีแผลในกระเพาะ',
                    'ไม่ควรใช้เกินขนาดในเด็กเล็ก'
                ],

                side_effects: [
                    'ระคายเคืองกระเพาะ (ใช้เกินขนาด)',
                    'ท้องเสีย (ใช้เกินขนาด)',
                    'เลือดออกง่าย (ใช้ปริมาณมาก)',
                    'ปวดศีรษะ',
                    'วิงเวียน',
                    'ผื่นแพ้ (ในคนไวต่อการแพ้)',
                    'ไข้ (ใช้เกินขนาด)'
                ],

                cultivation: {
                    climate: 'อากาศร้อนชื้น อุณหภูมิ 25-30°C',
                    soil: 'ดินร่วนซุย pH 6.0-6.8 อุดมไปด้วยอินทรียวัตถุ',
                    planting_season: 'ต้นฤดูฝน (เมษายน-พฤษภาคม)',
                    harvest_season: 'หลังฤดูฝน (ธันวาคม-กุมภาพันธ์)',
                    growing_period: '8-10 เดือน',
                    yield: '1,500-3,000 กก./ไร่',
                    cultivation_areas: [
                        'เชียงใหม่',
                        'เชียงราย',
                        'แม่ฮ่องสอน',
                        'ตาก',
                        'กาญจนบุรี',
                        'เพชรบุรี',
                        'ชุมพร',
                        'สุราษฎร์ธานี'
                    ]
                },

                quality_standards: {
                    appearance: 'หัวแก่ เปลือกเรียบ เนื้อเหลือง',
                    smell: 'กลิ่นเผ็ดร้อนเฉพาะตัว',
                    moisture: 'ไม่เกิน 12%',
                    gingerol_content: 'ขั้นต่ำ 1.5%',
                    heavy_metals: 'ตามมาตรฐาน WHO',
                    pesticide_residue: 'ตามมาตรฐาน GACP'
                },

                market_value: {
                    fresh: '60-100 บาท/กก.',
                    dried: '150-300 บาท/กก.',
                    powder: '400-800 บาท/กก.',
                    extract: '2,500-5,000 บาท/กก.',
                    oleoresin: '15,000-25,000 บาท/กก.',
                    demand: 'สูงมาก ทั้งในและต่างประเทศ'
                },

                gacp_requirements: {
                    seed_quality: 'พันธุ์ขิงแท้ มีใบรับรองคุณภาพ',
                    cultivation_record: 'บันทึกการใช้ปุ๋ยและยาป้องกันกำจัดศัตรูพืช',
                    harvest_time: 'เก็บเกี่ยวเมื่ออายุ 8-10 เดือน',
                    post_harvest: 'ล้าง อบแห้ง เก็บรักษาอย่างถูกต้อง',
                    storage_conditions: 'เก็บในที่แห้ง อุณหภูมิ 25-30°C',
                    quality_control: 'ตรวจสอบปริมาณ gingerol'
                }
            },

            'กระชายดำ': {
                id: 'black_galingale',
                name: 'กระชายดำ',
                scientific_name: 'Kaempferia parviflora Wall. ex Baker',
                english_name: 'Black Galingale, Thai Black Ginger',
                family: 'Zingiberaceae',
                common_names: ['กระชายดำ', 'ขิงดำ', 'กะเจาดำ', 'เก็ดดำ'],
                plant_type: 'สมุนไพรล้มลุกอายุหลายปี',
                
                therapeutic_uses: {
                    traditional: [
                        'ใช้บำรุงกำลัง เสริมสมรรถภาพทางเพศ',
                        'ใช้แก้ปวดเข่า ปวดเอว',
                        'ใช้บำรุงไต เสริมแกว่ง',
                        'ใช้แก้อ่อนเพลีย เพิ่มพลังงาน',
                        'ใช้แก้ปวดกล้ามเนื้อ',
                        'ใช้รักษาโรคผู้สูงอายุ',
                        'ใช้บำรุงระบบประสาท',
                        'ใช้แก้อาการหลงลืม',
                        'ใช้เป็นยาบำรุงหลังคลอด',
                        'ใช้แก้อาการเซื่องซึม'
                    ],
                    modern: [
                        'เพิ่มประสิทธิภาพการออกกำลังกาย (Ergogenic)',
                        'ต้านการอักเสบ (Anti-inflammatory)',
                        'ต้านอนุมูลอิสระ (Antioxidant)',
                        'เสริมสมรรถภาพทางเพศชาย',
                        'ลดความอ้วน เผาผลาญไขมัน',
                        'ปรับปรุงการไหลเวียนโลหิต',
                        'ลดความเสี่ยงโรคเบาหวาน',
                        'ป้องกันโรคหัวใจ',
                        'เสริมสร้างกล้ามเนื้อ',
                        'ต้านการเสื่อมสภาพของเซลล์'
                    ]
                },

                active_compounds: [
                    'Methoxyflavones',
                    '5,7-dimethoxyflavone',
                    '3,5,7,3\',4\'-pentamethoxyflavone',
                    'Polymethoxyflavones',
                    'Essential oils',
                    'Curcuminoids',
                    'Anthocyanins',
                    'Phenolic compounds'
                ],
                
                active_compounds_detail: {
                    methoxyflavones: {
                        content: '1.2-3.8%',
                        function: 'สารออกฤทธิ์หลัก',
                        benefits: 'เพิ่มสมรรถภาพ ต้านอนุมูลอิสระ'
                    },
                    dimethoxyflavone: {
                        content: '0.8-1.5%',
                        function: 'สารเสริมประสิทธิภาพ',
                        benefits: 'เพิ่มการทำงานของกล้ามเนื้อ'
                    },
                    anthocyanins: {
                        content: '0.5-1.2%',
                        function: 'สีม่วงดำ มีฤทธิ์ต้านอนุมูลอิสระ',
                        benefits: 'ป้องกันเซลล์เสื่อมสภาพ'
                    },
                    essential_oils: {
                        content: '0.5-2%',
                        function: 'น้ำมันหอมระเหย',
                        benefits: 'กระตุ้นการไหลเวียนโลหิต'
                    }
                },

                varieties: [
                    {
                        name: 'กระชายดำเขมร',
                        characteristics: 'สีดำเข้ม สรรพคุณดี',
                        methoxyflavone_content: '2.5-3.8%'
                    },
                    {
                        name: 'กระชายดำไทย',
                        characteristics: 'สีม่วงดำ รสขม',
                        methoxyflavone_content: '1.5-2.5%'
                    },
                    {
                        name: 'กระชายดำป่า',
                        characteristics: 'ขนาดเล็ก สรรพคุณเข้มข้น',
                        methoxyflavone_content: '2.8-3.5%'
                    }
                ],

                dosage: {
                    fresh: '2-5 กรัม/วัน',
                    dried_powder: '500-1500 มก./วัน',
                    extract: '100-500 มก./วัน',
                    supplement: '200-800 มก./วัน',
                    tea: '1-2 กรัม/วัน'
                },

                preparation_methods: [
                    'ต้มน้ำดื่ม',
                    'บดเป็นผงแห้ง',
                    'สกัดด้วยเอทานอล',
                    'ทำเป็นแคปซูล',
                    'แช่เหล้า',
                    'ผสมกับยาชุบแล้วอบ',
                    'ทำเป็นชาสมุนไพร'
                ],

                contraindications: [
                    'ห้ามใช้ในหญิงมีครรภ์และให้นมบุตร',
                    'ระวังในผู้ป่วยโรคหัวใจ',
                    'หลีกเลี่ยงในผู้ป่วยความดันโลหิตสูง',
                    'ระวังการใช้ร่วมกับยากระตุ้น',
                    'ไม่ควรใช้ในเด็กอายุต่ำกว่า 18 ปี',
                    'หลีกเลี่ยงในผู้ที่แพ้สมุนไพรตระกูลขิง',
                    'ระวังการใช้เกินขนาด'
                ],

                side_effects: [
                    'นอนไม่หลับ (ใช้เกินขนาด)',
                    'หัวใจเต้นเร็ว (ใช้เกินขนาด)',
                    'วิตกกังวล',
                    'ปวดศีรษะ',
                    'คลื่นไส้',
                    'ท้องเสีย (ใช้เกินขนาด)',
                    'ความดันโลหิตสูง (ใช้เกินขนาด)'
                ],

                cultivation: {
                    climate: 'อากาศร้อนชื้น ไม่ชอบแสงแดดจัด',
                    soil: 'ดินร่วนปนทราย pH 6.0-7.0 ระบายน้ำดี',
                    planting_season: 'ต้นฤดูฝน (เมษายน-มิถุนายน)',
                    harvest_season: 'หลังฤดูฝน (ตุลาคม-ธันวาคม)',
                    growing_period: '8-12 เดือน',
                    yield: '500-800 กก./ไร่',
                    cultivation_areas: [
                        'ลำปาง',
                        'แพร่',
                        'น่าน',
                        'อุทัยธานี',
                        'กาญจนบุรี',
                        'ราชบุรี',
                        'สกลนคร',
                        'มุกดาหาร'
                    ]
                },

                quality_standards: {
                    appearance: 'หัวดำ ผิวเรียบ ไม่เน่าเสีย',
                    smell: 'กลิ่นหอมเฉพาะตัว เผ็ดขม',
                    moisture: 'ไม่เกิน 10%',
                    methoxyflavone_content: 'ขั้นต่ำ 1.2%',
                    heavy_metals: 'ตามมาตรฐาน WHO',
                    pesticide_residue: 'ตามมาตรฐาน GACP'
                },

                market_value: {
                    fresh: '200-400 บาท/กก.',
                    dried: '500-1,000 บาท/กก.',
                    powder: '1,500-3,000 บาท/กก.',
                    extract: '8,000-15,000 บาท/กก.',
                    supplement: '2,000-5,000 บาท/กก.',
                    demand: 'สูงมาก โดยเฉพาะตลาดส่งออก'
                },

                research_findings: {
                    ubu_studies: [
                        'การศึกษาฤทธิ์เสริมสมรรถภาพการออกกำลังกาย',
                        'ประสิทธิภาพในการเผาผลาญไขมัน',
                        'การต้านอนุมูลอิสระและการอักเสบ',
                        'ความปลอดภัยในการใช้ระยะยาว'
                    ],
                    clinical_trials: 'ทดสอบในนักกีฬา 80 คน',
                    efficacy_rate: '75% ในการเพิ่มประสิทธิภาพการออกกำลังกาย',
                    safety_profile: 'ปลอดภัยเมื่อใช้ตามขนาดที่แนะนำ'
                },

                gacp_requirements: {
                    seed_quality: 'พันธุ์กระชายดำแท้ มีใบรับรองพันธุ์',
                    cultivation_record: 'บันทึกการใช้ปุ๋ย ยาป้องกันกำจัดศัตรูพืช',
                    harvest_time: 'เก็บเกี่ยวเมื่ออายุ 8-12 เดือน',
                    post_harvest: 'ล้าง อบแห้ง เก็บรักษาตามมาตรฐาน',
                    storage_conditions: 'เก็บในที่แห้ง ป้องกันแสง อุณหภูมิคงที่',
                    quality_control: 'ตรวจสอบปริมาณ methoxyflavones',
                    traceability: 'ติดตามย้อนกลับได้ทุกขั้นตอน'
                },

                export_potential: {
                    target_markets: ['สหรัฐอเมริกา', 'ญี่ปุ่น', 'ยุโรป', 'ออสเตรเลีย'],
                    export_value: '100-200 ล้านบาท/ปี',
                    growth_rate: '25-35% ต่อปี',
                    main_applications: 'อาหารเสริม ผลิตภัณฑ์กีฬา เครื่องสำอาง'
                }
            },

            'กระท่อม': {
                id: 'kratom',
                name: 'กระท่อม',
                scientific_name: 'Mitragyna speciosa (Korth.) Havil.',
                english_name: 'Kratom, Mitragyna',
                family: 'Rubiaceae',
                common_names: ['กระท่อม', 'กระท่อมใส', 'กระท่อมแดง', 'มิตรกันใน', 'ธูป'],
                plant_type: 'ไม้ยืนต้นขนาดกลาง',
                
                therapeutic_uses: {
                    traditional: [
                        'ใช้แก้ปวดเมื่อย ปวดกล้ามเนื้อ',
                        'ใช้แก้อาการอ่อนเพลีย',
                        'ใช้เพิ่มแรงงาน ลดความเหนื่อย',
                        'ใช้แก้ท้องเสีย ท้องร่วง',
                        'ใช้แก้ไอ แก้หวัด',
                        'ใช้แก้นอนไม่หลับ',
                        'ใช้แก้อาการซึมเศร้า',
                        'ใช้บำรุงกำลัง',
                        'ใช้แก้ปวดท้อง',
                        'ใช้เป็นยาชูกำลัง'
                    ],
                    modern: [
                        'บรรเทาอาการปวดเรื้อรัง',
                        'ช่วยเลิกสารเสพติด (ในการควบคุม)',
                        'แก้อาการซึมเศร้า',
                        'ลดความวิตกกังวล',
                        'เพิ่มความตื่นตัวและพลังงาน',
                        'ปรับสมดุลอารมณ์',
                        'ลดอาการถอนยา',
                        'บำบัดความเครียด',
                        'ช่วยในการนอนหลับ (ขนาดสูง)',
                        'ปรับปรุงสมาธิ'
                    ]
                },

                active_compounds: [
                    'Mitragynine',
                    '7-hydroxymitragynine',
                    'Paynantheine',
                    'Speciogynine',
                    'Speciociliatine',
                    'Mitraphylline',
                    'Rhynchophylline',
                    'Corynoxeine'
                ],
                
                active_compounds_detail: {
                    mitragynine: {
                        content: '12-21%',
                        function: 'อัลคาลอยด์หลัก ออกฤทธิ์กระตุ้นและแก้ปวด',
                        benefits: 'เพิ่มพลังงาน แก้ปวด ปรับอารมณ์'
                    },
                    hydroxymitragynine: {
                        content: '0.5-2%',
                        function: 'อัลคาลอยด์ทรงพลัง แก้ปวดมาก',
                        benefits: 'แก้ปวดเรื้อรัง ผ่อนคลาย'
                    },
                    paynantheine: {
                        content: '8.6-9%',
                        function: 'อัลคาลอยด์ผ่อนคลายกล้ามเนื้อ',
                        benefits: 'ลดความเครียด ผ่อนคลาย'
                    },
                    speciogynine: {
                        content: '6.6-7%',
                        function: 'อัลคาลอยด์กระตุ้นอ่อน',
                        benefits: 'เพิ่มแรงจูงใจ ปรับสมดุล'
                    }
                },

                varieties: [
                    {
                        name: 'กระท่อมใส (White Vein)',
                        characteristics: 'ใบเส้นสีขาว ฤทธิ์กระตุ้น',
                        effects: 'เพิ่มพลังงาน กระตุ้นสมาธิ'
                    },
                    {
                        name: 'กระท่อมแดง (Red Vein)',
                        characteristics: 'ใบเส้นสีแดง ฤทธิ์ผ่อนคลาย',
                        effects: 'แก้ปวด ผ่อนคลาย ช่วยนอนหลับ'
                    },
                    {
                        name: 'กระท่อมเขียว (Green Vein)',
                        characteristics: 'ใบเส้นสีเขียว ฤทธิ์สมดุล',
                        effects: 'สมดุลระหว่างกระตุ้นและผ่อนคลาย'
                    }
                ],

                dosage: {
                    leaves_fresh: '2-4 ใบ/วัน',
                    dried_powder: '1-3 กรัม/วัน',
                    extract: '0.5-1 กรัม/วัน',
                    tea: '1-2 ช้อนชา/วัน',
                    traditional_chew: '2-3 ใบ/วัน'
                },

                preparation_methods: [
                    'เคี้ยวใบสด',
                    'ต้มน้ำใบแห้ง',
                    'บดเป็นผงแห้ง',
                    'สกัดเป็นสารเข้มข้น',
                    'ทำเป็นแคปซูล',
                    'ชงเป็นชา',
                    'ผสมกับน้ำผลไม้'
                ],

                contraindications: [
                    'ห้ามใช้ในหญิงมีครรภ์และให้นมบุตร',
                    'ห้ามใช้ในเด็กอายุต่ำกว่า 18 ปี',
                    'หลีกเลี่ยงในผู้ที่มีประวัติสารเสพติด',
                    'ระวังการใช้ร่วมกับยากดประสาท',
                    'หลีกเลี่ยงในผู้ป่วยโรคตับ',
                    'ระวังการใช้ร่วมกับแอลกอฮอล์',
                    'หลีกเลี่ยงการขับขี่หลังการใช้'
                ],

                side_effects: [
                    'คลื่นไส้ อาเจียน',
                    'ท้องผูก',
                    'ง่วงซึม',
                    'วิงเวียนศีรษะ',
                    'ปากแห้ง',
                    'ติดเสพ (การใช้ระยะยาว)',
                    'ระคายเคืองกระเพาะ',
                    'การถอน (เมื่อหยุดใช้)'
                ],

                cultivation: {
                    climate: 'อากาศเขตร้อนชื้น อุณหภูมิ 24-34°C',
                    soil: 'ดินร่วนปนดินเหนียว pH 5.5-6.5 อุดมไปด้วยอินทรียวัตถุ',
                    planting_season: 'ตลอดปี (ในเขตร้อนชื้น)',
                    harvest_season: 'เก็บใบได้ตลอดปี (ใบแก่)',
                    growing_period: '2-3 ปี (เริ่มเก็บใบ)',
                    yield: '500-1,000 กก.ใบแห้ง/ต้น/ปี',
                    cultivation_areas: [
                        'สงขลา',
                        'ปัตตานี',
                        'ยะลา',
                        'นราธิวาส',
                        'สตูล',
                        'ชุมพร',
                        'สุราษฎร์ธานี',
                        'กระบี่'
                    ]
                },

                quality_standards: {
                    appearance: 'ใบแก่ สีเขียวเข้ม ไม่เน่าเสีย',
                    smell: 'กลิ่นหอมขม เฉพาะตัว',
                    moisture: 'ไม่เกิน 8%',
                    mitragynine_content: 'ขั้นต่ำ 12%',
                    heavy_metals: 'ตามมาตรฐาน WHO',
                    pesticide_residue: 'ตามมาตรฐาน GACP',
                    contamination: 'ไม่มีเชื้อแบคทีเรียและรา'
                },

                market_value: {
                    fresh_leaves: '20-50 บาท/กก.',
                    dried_leaves: '100-300 บาท/กก.',
                    powder: '500-1,500 บาท/กก.',
                    extract: '5,000-15,000 บาท/กก.',
                    standardized_extract: '20,000-50,000 บาท/กก.',
                    demand: 'สูงในตลาดส่งออก (ที่ถูกกฎหมาย)'
                },

                legal_status: {
                    thailand: 'ถอดออกจากรายการยาเสพติด พ.ศ. 2564',
                    cultivation: 'อนุญาตปลูกและใช้ในประเทศ',
                    age_limit: 'ห้าม < 18 ปี',
                    export: 'ต้องขออนุญาตส่งออก',
                    commercial_use: 'ต้องขึ้นทะเบียนผลิตภัณฑ์',
                    medical_use: 'อนุญาตใช้ทางการแพทย์แผนไทย'
                },

                research_findings: {
                    ubu_studies: [
                        'การศึกษาความปลอดภัยในการใช้กระท่อม',
                        'ฤทธิ์แก้ปวดและการพึ่งพา',
                        'การพัฒนาผลิตภัณฑ์สมุนไพรจากกระท่อม',
                        'มาตรฐานคุณภาพและการควบคุม'
                    ],
                    clinical_trials: 'ทดสอบความปลอดภัยใน 120 อาสาสมัคร',
                    efficacy_rate: '70% ในการบรรเทาอาการปวด',
                    safety_profile: 'ปลอดภัยเมื่อใช้ในขนาดพอเหมาะ'
                },

                gacp_requirements: {
                    license_required: 'ขึ้นทะเบียนการปลูกกับกรมพัฒนาการแพทย์แผนไทยและการแพทย์ทางเลือก',
                    security_level: 'ปานกลาง',
                    cultivation_area: 'พื้นที่ควบคุม มีการบันทึกการผลิต',
                    record_keeping: 'บันทึกการปลูก การเก็บเกี่ยว การขาย',
                    age_verification: 'ตรวจสอบอายุผู้ซื้อ ≥ 18 ปี',
                    quality_control: 'ตรวจสอบปริมาณ mitragynine',
                    storage_conditions: 'เก็บในที่แห้ง ป้องกันแสง อุณหภูมิคงที่',
                    traceability: 'ติดตามย้อนกลับได้ทุกขั้นตอน'
                },

                export_potential: {
                    target_markets: ['แคนาดา', 'สหรัฐอเมริกา (บางรัฐ)', 'เนเธอร์แลนด์', 'เยอรมนี'],
                    export_value: '200-500 ล้านบาท/ปี (คาดการณ์)',
                    growth_rate: '30-50% ต่อปี',
                    main_applications: 'ยาสมุนไพร อาหารเสริม ผลิตภัณฑ์เพื่อสุขภาพ'
                }
            }
        };
    }

    /**
     * ค้นหาข้อมูลสมุนไพร - รองรับหลายชื่อเรียก
     */
    getHerbInfo(herbName) {
        // ค้นหาโดยตรง
        if (this.herbs[herbName]) {
            return this.herbs[herbName];
        }
        
        // ค้นหาจากชื่อเรียกทั่วไป
        const commonNames = {
            'ขมิ้น': 'ขมิ้นชัน',
            'ขมิ้นเหลือง': 'ขมิ้นชัน',
            'ขิงแก่': 'ขิง',
            'ขิงอ่อน': 'ขิง',
            'ขิงป่า': 'ขิง',
            'ข่า': 'ขิง',
            'ขิงแดง': 'ขิง',
            'ไพล': 'พลาย',
            'ปลา': 'พลาย',
            'เปลา': 'พลาย',
            'ข่าป่า': 'พลาย',
            'ขิงดำ': 'กระชายดำ',
            'กะเจาดำ': 'กระชายดำ',
            'เก็ดดำ': 'กระชายดำ',
            'กระท่อมใส': 'กระท่อม',
            'กระท่อมแดง': 'กระท่อม',
            'มิตรกันใน': 'กระท่อม',
            'ธูป': 'กระท่อม',
            'กัญชง': 'กัญชา',
            'มารีฮัวนา': 'กัญชา',
            'hemp': 'กัญชา',
            'กัญชาขาว': 'กัญชา',
            'กัญชาแดง': 'กัญชา'
        };
        
        const standardName = commonNames[herbName];
        if (standardName && this.herbs[standardName]) {
            return this.herbs[standardName];
        }
        
        throw new Error(`ไม่พบข้อมูลสมุนไพร "${herbName}" ในฐานข้อมูล`);
    }

    /**
     * ค้นหาสมุนไพรตามสรรพคุณ
     */
    searchByTherapeuticUse(condition) {
        const results = [];
        Object.entries(this.herbs).forEach(([name, herb]) => {
            if (herb.therapeutic_uses) {
                const allUses = [
                    ...(herb.therapeutic_uses.traditional || []),
                    ...(herb.therapeutic_uses.modern || [])
                ];
                if (allUses.some(use => use.toLowerCase().includes(condition.toLowerCase()))) {
                    results.push({
                        name,
                        ...herb,
                        matching_uses: allUses.filter(use => 
                            use.toLowerCase().includes(condition.toLowerCase())
                        )
                    });
                }
            }
        });
        return results;
    }

    /**
     * ดึงข้อมูลสารสำคัญ
     */
    getActiveCompounds(herbName) {
        const herb = this.getHerbInfo(herbName);
        return {
            herb_name: herbName,
            scientific_name: herb.scientific_name,
            active_compounds: herb.active_compounds || [],
            active_compounds_detail: herb.active_compounds_detail || {}
        };
    }

    /**
     * คำนวณปริมาณที่แนะนำตามน้ำหนักตัว
     */
    calculateDosageByWeight(herbName, weightKg, form = 'dried') {
        const herb = this.getHerbInfo(herbName);
        if (!herb.dosage) {
            throw new Error(`ไม่มีข้อมูลปริมาณการใช้สำหรับ ${herbName}`);
        }

        const baseWeight = 60; // น้ำหนักมาตรฐาน 60 กก.
        const ratio = weightKg / baseWeight;
        
        // ปรับปริมาณตามน้ำหนักตัว (ไม่เกิน 1.5 เท่า)
        const adjustedRatio = Math.min(ratio, 1.5);
        
        const dosageInfo = herb.dosage[form];
        if (!dosageInfo) {
            throw new Error(`ไม่มีข้อมูลปริมาณสำหรับรูปแบบ ${form}`);
        }

        // แปลงข้อมูลปริมาณ (สมมติว่าเป็นรูปแบบ "1-4 กรัม/วัน")
        const dosageMatch = dosageInfo.match(/([\d.]+)(?:-([\d.]+))?\s*([ก-๙a-zA-Z]+)/);
        if (dosageMatch) {
            const minDose = parseFloat(dosageMatch[1]);
            const maxDose = dosageMatch[2] ? parseFloat(dosageMatch[2]) : minDose;
            const unit = dosageMatch[3];

            return {
                min_dose: (minDose * adjustedRatio).toFixed(2),
                max_dose: (maxDose * adjustedRatio).toFixed(2),
                unit: unit,
                weight_adjusted: true,
                original_dosage: dosageInfo
            };
        }

        return { original_dosage: dosageInfo };
    }

    /**
     * ตรวจสอบข้อห้ามใช้
     */
    checkContraindications(herbName, conditions = []) {
        const herb = this.getHerbInfo(herbName);
        const contraindications = herb.contraindications || [];
        
        const warnings = [];
        conditions.forEach(condition => {
            contraindications.forEach(contraindication => {
                if (contraindication.toLowerCase().includes(condition.toLowerCase())) {
                    warnings.push({
                        condition,
                        warning: contraindication,
                        severity: 'high'
                    });
                }
            });
        });

        return {
            safe: warnings.length === 0,
            warnings,
            all_contraindications: contraindications
        };
    }

    /**
     * เปรียบเทียบสมุนไพร
     */
    compareHerbs(herbNames) {
        if (herbNames.length < 2) {
            throw new Error('ต้องมีสมุนไพรอย่างน้อย 2 ชนิดในการเปรียบเทียบ');
        }

        const comparison = {
            herbs: {},
            similarities: [],
            differences: []
        };

        herbNames.forEach(name => {
            comparison.herbs[name] = this.getHerbInfo(name);
        });

        // หาความคล้ายคลึงในการใช้งาน
        const firstHerb = comparison.herbs[herbNames[0]];
        if (firstHerb.therapeutic_uses) {
            const firstUses = [
                ...(firstHerb.therapeutic_uses.traditional || []),
                ...(firstHerb.therapeutic_uses.modern || [])
            ];

            herbNames.slice(1).forEach(name => {
                const herb = comparison.herbs[name];
                if (herb.therapeutic_uses) {
                    const herbUses = [
                        ...(herb.therapeutic_uses.traditional || []),
                        ...(herb.therapeutic_uses.modern || [])
                    ];
                    
                    const commonUses = firstUses.filter(use => 
                        herbUses.some(herbUse => 
                            herbUse.toLowerCase().includes(use.toLowerCase()) ||
                            use.toLowerCase().includes(herbUse.toLowerCase())
                        )
                    );

                    if (commonUses.length > 0) {
                        comparison.similarities.push({
                            herbs: [herbNames[0], name],
                            common_uses: commonUses
                        });
                    }
                }
            });
        }

        return comparison;
    }

    /**
     * สร้างแผนการปลูกตามฤดูกาล
     */
    generateCultivationPlan(region = 'central') {
        const plan = {
            region,
            monthly_schedule: {},
            recommendations: []
        };

        const months = [
            'มกราคม', 'กุมภาพันธ์', 'มีนาคม', 'เมษายน', 'พฤษภาคม', 'มิถุนายน',
            'กรกฎาคม', 'สิงหาคม', 'กันยายน', 'ตุลาคม', 'พฤศจิกายน', 'ธันวาคม'
        ];

        months.forEach(month => {
            plan.monthly_schedule[month] = {
                planting: [],
                harvesting: [],
                maintenance: []
            };
        });

        Object.entries(this.herbs).forEach(([name, herb]) => {
            if (herb.cultivation && herb.cultivation.harvest_season) {
                const harvestInfo = herb.cultivation.harvest_season;
                
                // วิเคราะห์ฤดูเก็บเกี่ยว
                if (harvestInfo.includes('มกราคม')) {
                    plan.monthly_schedule['มกราคม'].harvesting.push(name);
                }
                if (harvestInfo.includes('พฤศจิกายน')) {
                    plan.monthly_schedule['พฤศจิกายน'].harvesting.push(name);
                }
                if (harvestInfo.includes('มีนาคม')) {
                    plan.monthly_schedule['มีนาคม'].harvesting.push(name);
                }

                // คำนวณเวลาปลูก (ย้อนหลังจากเวลาเก็บเกี่ยว)
                const growingPeriod = herb.cultivation.growing_period;
                if (growingPeriod && growingPeriod.includes('8-10 เดือน')) {
                    plan.monthly_schedule['เมษายน'].planting.push(name);
                }
            }
        });

        return plan;
    }

    /**
     * ตรวจสอบว่าต้องใบอนุญาตพิเศษหรือไม่
     */
    requiresSpecialLicense(herbName) {
        const herb = this.getHerbInfo(herbName);
        return {
            requires_license: herb.gacp_requirements?.license_required ? true : false,
            license_type: herb.gacp_requirements?.license_required || 'ไม่ต้องการ',
            security_level: herb.gacp_requirements?.security_level || 'ปกติ',
            special_requirements: herb.gacp_requirements?.special_requirements || []
        };
    }

    /**
     * รายการสมุนไพรทั้งหมด
     */
    getAllHerbs() {
        return Object.keys(this.herbs);
    }

    /**
     * ตรวจสอบความถูกต้องของชื่อสมุนไพร
     */
    validateHerbs(herbNames) {
        const invalid = [];
        for (const name of herbNames) {
            try {
                this.getHerbInfo(name); // ใช้ getHerbInfo ที่รองรับชื่อเรียกต่างๆ
            } catch (error) {
                invalid.push(name);
            }
        }
        
        if (invalid.length > 0) {
            throw new Error(`สมุนไพรที่ไม่รองรับ: ${invalid.join(', ')}`);
        }
        return true;
    }

    /**
     * สร้าง GACP Requirements สำหรับสมุนไพรที่เลือก
     */
    getGACPRequirements(herbNames) {
        this.validateHerbs(herbNames);
        
        const requirements = {
            security_level: 'ปกติ',
            special_documentation: [],
            storage_requirements: [],
            quality_controls: []
        };

        herbNames.forEach(herbName => {
            const herb = this.getHerbInfo(herbName); // ใช้ getHerbInfo แทน direct access
            
            // ระดับความปลอดภัยสูงสุด
            if (herb.gacp_requirements.security_level === 'สูง') {
                requirements.security_level = 'สูง';
            } else if (herb.gacp_requirements.security_level === 'ปานกลาง' && 
                      requirements.security_level === 'ปกติ') {
                requirements.security_level = 'ปานกลาง';
            }

            requirements.storage_requirements.push(`${herbName}: ${herb.gacp_requirements.storage_conditions}`);
            requirements.quality_controls.push(`${herbName}: ${herb.gacp_requirements.quality_control}`);
            
            if (herb.special_license_required) {
                requirements.special_documentation.push(`${herbName}: ต้องใบอนุญาตพิเศษ`);
            }
        });

        return requirements;
    }

    /**
     * คำนวณค่าธรรมเนียมตาม multiplier ของสมุนไพร
     */
    calculateHerbFeeMultiplier(herbName) {
        try {
            const herb = this.getHerbInfo(herbName);
            
            // Fee multipliers based on herb complexity and regulatory requirements
            const feeMultipliers = {
                'กัญชา': {
                    multiplier: 2.0,
                    category: 'controlled_substance',
                    special_license_required: true,
                    reason: 'พืชควบคุมพิเศษ ต้องการใบอนุญาตและการตรวจสอบเข้มงวด'
                },
                'ขมิ้นชัน': {
                    multiplier: 1.0,
                    category: 'standard',
                    special_license_required: false,
                    reason: 'สมุนไพรทั่วไป ไม่มีความซับซ้อนพิเศษ'
                },
                'ขิง': {
                    multiplier: 1.0,
                    category: 'standard',
                    special_license_required: false,
                    reason: 'สมุนไพรทั่วไป ไม่มีความซับซ้อนพิเศษ'
                },
                'กระชายดำ': {
                    multiplier: 1.2,
                    category: 'rare_herb',
                    special_license_required: false,
                    reason: 'สมุนไพรหายาก ต้องการการตรวจสอบพิเศษ'
                },
                'ไพล': {
                    multiplier: 1.1,
                    category: 'traditional',
                    special_license_required: false,
                    reason: 'สมุนไพรดั้งเดิม มีความซับซ้อนปานกลาง'
                },
                'กระท่อม': {
                    multiplier: 1.5,
                    category: 'regulated',
                    special_license_required: true,
                    reason: 'พืชมีการควบคุมระดับปานกลาง'
                }
            };

            const standardName = this.getStandardHerbName(herbName);
            const feeInfo = feeMultipliers[standardName];
            
            if (!feeInfo) {
                // Default multiplier for unlisted herbs
                return {
                    multiplier: 1.0,
                    category: 'standard',
                    special_license_required: false,
                    reason: 'สมุนไพรทั่วไป (ไม่มีในรายการพิเศษ)'
                };
            }

            return feeInfo;
        } catch (error) {
            console.warn(`Warning: Unable to get fee multiplier for ${herbName}, using default: ${error.message}`);
            return {
                multiplier: 1.0,
                category: 'standard',
                special_license_required: false,
                reason: 'ไม่สามารถระบุข้อมูลได้ ใช้ค่าเริ่มต้น'
            };
        }
    }

    /**
     * ได้ชื่อมาตรฐานของสมุนไพร
     */
    getStandardHerbName(herbName) {
        try {
            const herb = this.getHerbInfo(herbName);
            // Find the standard name by checking which key in this.herbs matches the herb
            for (const [standardName, herbData] of Object.entries(this.herbs)) {
                if (herbData === herb) {
                    return standardName;
                }
            }
            return herbName; // fallback
        } catch (error) {
            return herbName; // fallback
        }
    }

    /**
     * ตรวจสอบว่าสมุนไพรต้องใบอนุญาตพิเศษหรือไม่
     */
    requiresSpecialLicense(herbName) {
        try {
            const feeInfo = this.calculateHerbFeeMultiplier(herbName);
            return feeInfo.special_license_required;
        } catch (error) {
            return false;
        }
    }

    /**
     * ดึงข้อมูลหมวดหมู่ของสมุนไพร
     */
    getHerbCategory(herbName) {
        try {
            const feeInfo = this.calculateHerbFeeMultiplier(herbName);
            return feeInfo.category;
        } catch (error) {
            return 'standard';
        }
    }
}

module.exports = ThaiHerbalDatabase;