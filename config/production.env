# ภาคผนวก ก: Environment Variables Configuration
# GACP Platform Production Environment Configuration

# .env.production
# =================

# Core Database Configuration
DB_HOST=postgres-cluster.gacp.internal
DB_PORT=5432
DB_NAME=gacp_production
DB_USER=gacp_app
DB_PASSWORD=${SECRET_DB_PASSWORD}
DB_SSL=true
DB_POOL_SIZE=20
DB_IDLE_TIMEOUT=30000
DB_CONNECTION_TIMEOUT=5000

# MongoDB Configuration
MONGODB_HOST=mongodb-cluster.gacp.internal
MONGODB_PORT=27017
MONGODB_DATABASE=gacp_documents
MONGODB_USERNAME=gacp_mongo_user
MONGODB_PASSWORD=${SECRET_MONGODB_PASSWORD}
MONGODB_REPLICA_SET=gacp-rs
MONGODB_SSL=true

# Redis Configuration
REDIS_HOST=redis-cluster.gacp.internal
REDIS_PORT=6379
REDIS_PASSWORD=${SECRET_REDIS_PASSWORD}
REDIS_DB=0
REDIS_MAX_RETRIES=3
REDIS_CONNECT_TIMEOUT=5000

# Security Configuration
JWT_PUBLIC_KEY=${SECRET_JWT_PUBLIC_KEY}
JWT_PRIVATE_KEY=${SECRET_JWT_PRIVATE_KEY}
JWT_ISSUER=gacp.dtam.go.th
JWT_AUDIENCE=gacp-platform-users
JWT_EXPIRATION=24h
ENCRYPTION_KEY=${SECRET_FIELD_ENCRYPTION_KEY}
SESSION_SECRET=${SECRET_SESSION_SECRET}

# Thai Government Integration
THAI_GOV_API_BASE=https://api.dtam.go.th
THAI_GOV_API_KEY=${SECRET_THAI_GOV_API_KEY}
THAI_GOV_API_TIMEOUT=30000
NATIONAL_ID_VERIFICATION_URL=https://verification.dtam.go.th/api/v1/verify

# AWS Configuration (for file storage)
AWS_REGION=ap-southeast-1
AWS_ACCESS_KEY_ID=${SECRET_AWS_ACCESS_KEY}
AWS_SECRET_ACCESS_KEY=${SECRET_AWS_SECRET_KEY}
S3_BUCKET=gacp-documents-prod
S3_REGION=ap-southeast-1
S3_ENCRYPTION=AES256
CLOUDFRONT_DOMAIN=cdn.gacp.dtam.go.th

# Email Service Configuration
SMTP_HOST=smtp.sendgrid.net
SMTP_PORT=587
SMTP_SECURE=true
SMTP_USER=apikey
SMTP_PASSWORD=${SECRET_SENDGRID_API_KEY}
EMAIL_FROM=noreply@gacp.dtam.go.th
EMAIL_FROM_NAME=ระบบ GACP กรมแพทย์แผนไทย

# Monitoring and Logging
SENTRY_DSN=${SECRET_SENTRY_DSN}
SENTRY_ENVIRONMENT=production
SENTRY_RELEASE=${CI_COMMIT_SHA}
NEW_RELIC_LICENSE_KEY=${SECRET_NEW_RELIC_KEY}
NEW_RELIC_APP_NAME=GACP-Platform-Production
LOG_LEVEL=info
LOG_FORMAT=json
LOG_FILE=/var/log/gacp/application.log

# Rate Limiting Configuration
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_FARMER_MAX=200
RATE_LIMIT_INSPECTOR_MAX=500
RATE_LIMIT_ADMIN_MAX=1000

# Application Configuration
NODE_ENV=production
PORT=3001
CLUSTER_MODE=true
CLUSTER_WORKERS=0  # 0 = auto (CPU cores)
USE_ADVANCED_SERVICE=true
API_VERSION=v1
API_BASE_PATH=/api/v1
MAX_FILE_SIZE=10485760  # 10MB
ALLOWED_FILE_TYPES=pdf,jpg,jpeg,png,doc,docx

# Thai-specific Settings
DEFAULT_TIMEZONE=Asia/Bangkok
DEFAULT_LANGUAGE=th-TH
SUPPORTED_LANGUAGES=th-TH,en-US
THAI_PROVINCES_API=https://api.gacp.dtam.go.th/provinces
CURRENCY=THB
DATE_FORMAT=DD/MM/YYYY
THAI_CALENDAR=true

# Payment Gateway Configuration (Mock for Testing)
PAYMENT_GATEWAY_MODE=test
PAYMENT_GATEWAY_URL=http://localhost:3005
OMISE_PUBLIC_KEY=${SECRET_OMISE_PUBLIC_KEY}
OMISE_SECRET_KEY=${SECRET_OMISE_SECRET_KEY}
PROMPTPAY_RECIPIENT_ID=0658934000695
BANK_ACCOUNT_NUMBER=123-4-56789-0
BANK_ACCOUNT_NAME=กรมการแพทย์แผนไทยและการแพทย์ทางเลือก

# Feature Flags
FEATURE_MOBILE_APP=true
FEATURE_BLOCKCHAIN_TRACKING=false
FEATURE_AI_DOCUMENT_ANALYSIS=false
FEATURE_IOT_INTEGRATION=false
FEATURE_MULTI_LANGUAGE=true
FEATURE_OFFLINE_MODE=false

# Performance Tuning
HTTP_TIMEOUT=30000
DATABASE_QUERY_TIMEOUT=10000
CACHE_TTL=3600
CACHE_MAX_SIZE=1000
COMPRESSION_ENABLED=true
COMPRESSION_THRESHOLD=1024

# Security Headers
HELMET_CSP_ENABLED=true
HELMET_HSTS_ENABLED=true
HELMET_NOSNIFF_ENABLED=true
HELMET_FRAMEGUARD_ENABLED=true
HELMET_XSS_FILTER_ENABLED=true

# Health Check Configuration
HEALTH_CHECK_TIMEOUT=5000
HEALTH_CHECK_INTERVAL=30000
READINESS_CHECK_DEPENDENCIES=postgresql,mongodb,redis
LIVENESS_CHECK_TIMEOUT=3000

# Backup Configuration
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *  # Daily at 2 AM
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=gacp-backups-prod
BACKUP_ENCRYPTION_ENABLED=true

# Audit Logging
AUDIT_LOG_ENABLED=true
AUDIT_LOG_LEVEL=info
AUDIT_LOG_RETENTION_DAYS=365
AUDIT_LOG_EVENTS=create,update,delete,login,logout,payment

# Content Delivery
CDN_ENABLED=true
CDN_BASE_URL=https://cdn.gacp.dtam.go.th
STATIC_FILES_TTL=86400
IMAGE_OPTIMIZATION=true
IMAGE_FORMATS=webp,jpg,png

# Notification Services
PUSH_NOTIFICATION_ENABLED=true
PUSH_NOTIFICATION_PROVIDER=firebase
FIREBASE_PROJECT_ID=gacp-platform
FIREBASE_PRIVATE_KEY=${SECRET_FIREBASE_PRIVATE_KEY}
SMS_PROVIDER=twilio
SMS_ACCOUNT_SID=${SECRET_TWILIO_ACCOUNT_SID}
SMS_AUTH_TOKEN=${SECRET_TWILIO_AUTH_TOKEN}

# Development and Debug (Production = false)
DEBUG_MODE=false
VERBOSE_LOGGING=false
PROFILING_ENABLED=false
MEMORY_MONITORING=true
CPU_MONITORING=true

# =================
# Secret Management
# =================
# All ${SECRET_*} variables should be managed through:
# - Kubernetes Secrets
# - AWS Secrets Manager
# - HashiCorp Vault
# - Or similar secure secret management system

# Never commit actual secret values to version control!
# Use secret management tools and reference them via environment variables